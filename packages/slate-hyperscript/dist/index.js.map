{"version":3,"file":"index.js","sources":["../../../node_modules/@babel/runtime/helpers/typeof.js","../../../node_modules/@babel/runtime/helpers/defineProperty.js","../../../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../../../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../../../node_modules/@babel/runtime/helpers/nonIterableRest.js","../../../node_modules/@babel/runtime/helpers/slicedToArray.js","../../../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../../../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../../../node_modules/@babel/runtime/helpers/inherits.js","../../../node_modules/@babel/runtime/helpers/classCallCheck.js","../src/tokens.ts","../src/creators.ts","../src/hyperscript.ts","../src/index.ts"],"sourcesContent":["function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","import { Node, Path, Text } from 'slate'\n\n/**\n * A weak map to hold anchor tokens.\n */\n\nconst ANCHOR: WeakMap<Node, [number, AnchorToken]> = new WeakMap()\n\n/**\n * A weak map to hold focus tokens.\n */\n\nconst FOCUS: WeakMap<Node, [number, FocusToken]> = new WeakMap()\n\n/**\n * All tokens inherit from a single constructor for `instanceof` checking.\n */\n\nexport class Token {}\n\n/**\n * Anchor tokens represent the selection's anchor point.\n */\n\nexport class AnchorToken extends Token {\n  offset?: number\n  path?: Path\n\n  constructor(\n    props: {\n      offset?: number\n      path?: Path\n    } = {}\n  ) {\n    super()\n    const { offset, path } = props\n    this.offset = offset\n    this.path = path\n  }\n}\n\n/**\n * Focus tokens represent the selection's focus point.\n */\n\nexport class FocusToken extends Token {\n  offset?: number\n  path?: Path\n\n  constructor(\n    props: {\n      offset?: number\n      path?: Path\n    } = {}\n  ) {\n    super()\n    const { offset, path } = props\n    this.offset = offset\n    this.path = path\n  }\n}\n\n/**\n * Add an anchor token to the end of a text node.\n */\n\nexport const addAnchorToken = (text: Text, token: AnchorToken) => {\n  const offset = text.text.length\n  ANCHOR.set(text, [offset, token])\n}\n\n/**\n * Get the offset if a text node has an associated anchor token.\n */\n\nexport const getAnchorOffset = (\n  text: Text\n): [number, AnchorToken] | undefined => {\n  return ANCHOR.get(text)\n}\n\n/**\n * Add a focus token to the end of a text node.\n */\n\nexport const addFocusToken = (text: Text, token: FocusToken) => {\n  const offset = text.text.length\n  FOCUS.set(text, [offset, token])\n}\n\n/**\n * Get the offset if a text node has an associated focus token.\n */\n\nexport const getFocusOffset = (\n  text: Text\n): [number, FocusToken] | undefined => {\n  return FOCUS.get(text)\n}\n","import {\n  Element,\n  Descendant,\n  Node,\n  Range,\n  Text,\n  Editor,\n  createEditor as makeEditor,\n} from 'slate'\nimport {\n  AnchorToken,\n  FocusToken,\n  Token,\n  addAnchorToken,\n  addFocusToken,\n  getAnchorOffset,\n  getFocusOffset,\n} from './tokens'\n\n/**\n * Resolve the descedants of a node by normalizing the children that can be\n * passed into a hyperscript creator function.\n */\n\nconst STRINGS: WeakSet<Text> = new WeakSet()\n\nconst resolveDescendants = (children: any[]): Descendant[] => {\n  const nodes: Node[] = []\n\n  const addChild = (child: Node | Token): void => {\n    if (child == null) {\n      return\n    }\n\n    const prev = nodes[nodes.length - 1]\n\n    if (typeof child === 'string') {\n      const text = { text: child }\n      STRINGS.add(text)\n      child = text\n    }\n\n    if (Text.isText(child)) {\n      const c = child // HACK: fix typescript complaining\n\n      if (\n        Text.isText(prev) &&\n        STRINGS.has(prev) &&\n        STRINGS.has(c) &&\n        Text.equals(prev, c, { loose: true })\n      ) {\n        prev.text += c.text\n      } else {\n        nodes.push(c)\n      }\n    } else if (Element.isElement(child)) {\n      nodes.push(child)\n    } else if (child instanceof Token) {\n      let n = nodes[nodes.length - 1]\n\n      if (!Text.isText(n)) {\n        addChild('')\n        n = nodes[nodes.length - 1] as Text\n      }\n\n      if (child instanceof AnchorToken) {\n        addAnchorToken(n, child)\n      } else if (child instanceof FocusToken) {\n        addFocusToken(n, child)\n      }\n    } else {\n      throw new Error(`Unexpected hyperscript child object: ${child}`)\n    }\n  }\n\n  for (const child of children.flat(Infinity)) {\n    addChild(child)\n  }\n\n  return nodes\n}\n\n/**\n * Create an anchor token.\n */\n\nexport function createAnchor(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): AnchorToken {\n  return new AnchorToken(attributes)\n}\n\n/**\n * Create an anchor and a focus token.\n */\n\nexport function createCursor(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Token[] {\n  return [new AnchorToken(attributes), new FocusToken(attributes)]\n}\n\n/**\n * Create an `Element` object.\n */\n\nexport function createElement(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Element {\n  return { ...attributes, children: resolveDescendants(children) }\n}\n\n/**\n * Create a focus token.\n */\n\nexport function createFocus(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): FocusToken {\n  return new FocusToken(attributes)\n}\n\n/**\n * Create a fragment.\n */\n\nexport function createFragment(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Descendant[] {\n  return resolveDescendants(children)\n}\n\n/**\n * Create a `Selection` object.\n */\n\nexport function createSelection(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Range {\n  const anchor: AnchorToken = children.find(c => c instanceof AnchorToken)\n  const focus: FocusToken = children.find(c => c instanceof FocusToken)\n\n  if (!anchor || anchor.offset == null || anchor.path == null) {\n    throw new Error(\n      `The <selection> hyperscript tag must have an <anchor> tag as a child with \\`path\\` and \\`offset\\` attributes defined.`\n    )\n  }\n\n  if (!focus || focus.offset == null || focus.path == null) {\n    throw new Error(\n      `The <selection> hyperscript tag must have a <focus> tag as a child with \\`path\\` and \\`offset\\` attributes defined.`\n    )\n  }\n\n  return {\n    anchor: {\n      offset: anchor.offset,\n      path: anchor.path,\n    },\n    focus: {\n      offset: focus.offset,\n      path: focus.path,\n    },\n    ...attributes,\n  }\n}\n\n/**\n * Create a `Text` object.\n */\n\nexport function createText(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Text {\n  const nodes = resolveDescendants(children)\n\n  if (nodes.length > 1) {\n    throw new Error(\n      `The <text> hyperscript tag must only contain a single node's worth of children.`\n    )\n  }\n\n  let [node] = nodes\n\n  if (node == null) {\n    node = { text: '' }\n  }\n\n  if (!Text.isText(node)) {\n    throw new Error(`\n    The <text> hyperscript tag can only contain text content as children.`)\n  }\n\n  // COMPAT: If they used the <text> tag we want to guarantee that it won't be\n  // merge with other string children.\n  STRINGS.delete(node)\n\n  Object.assign(node, attributes)\n  return node\n}\n\n/**\n * Create a top-level `Editor` object.\n */\n\nexport function createEditor(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Editor {\n  const otherChildren: any[] = []\n  let selectionChild: Range | undefined\n\n  for (const child of children) {\n    if (Range.isRange(child)) {\n      selectionChild = child\n    } else {\n      otherChildren.push(child)\n    }\n  }\n\n  const descendants = resolveDescendants(otherChildren)\n  const selection: Partial<Range> = {}\n  const editor = makeEditor()\n  Object.assign(editor, attributes)\n  editor.children = descendants\n\n  // Search the document's texts to see if any of them have tokens associated\n  // that need incorporated into the selection.\n  for (const [node, path] of Node.texts(editor)) {\n    const anchor = getAnchorOffset(node)\n    const focus = getFocusOffset(node)\n\n    if (anchor != null) {\n      const [offset] = anchor\n      selection.anchor = { path, offset }\n    }\n\n    if (focus != null) {\n      const [offset] = focus\n      selection.focus = { path, offset }\n    }\n  }\n\n  if (selection.anchor && !selection.focus) {\n    throw new Error(\n      `Slate hyperscript ranges must have both \\`<anchor />\\` and \\`<focus />\\` defined if one is defined, but you only defined \\`<anchor />\\`. For collapsed selections, use \\`<cursor />\\` instead.`\n    )\n  }\n\n  if (!selection.anchor && selection.focus) {\n    throw new Error(\n      `Slate hyperscript ranges must have both \\`<anchor />\\` and \\`<focus />\\` defined if one is defined, but you only defined \\`<focus />\\`. For collapsed selections, use \\`<cursor />\\` instead.`\n    )\n  }\n\n  if (selectionChild != null) {\n    editor.selection = selectionChild\n  } else if (Range.isRange(selection)) {\n    editor.selection = selection\n  }\n\n  return editor\n}\n","import isPlainObject from 'is-plain-object'\nimport { Element } from 'slate'\nimport {\n  createAnchor,\n  createCursor,\n  createEditor,\n  createElement,\n  createFocus,\n  createFragment,\n  createSelection,\n  createText,\n} from './creators'\n\n/**\n * The default creators for Slate objects.\n */\n\nconst DEFAULT_CREATORS = {\n  anchor: createAnchor,\n  cursor: createCursor,\n  editor: createEditor,\n  element: createElement,\n  focus: createFocus,\n  fragment: createFragment,\n  selection: createSelection,\n  text: createText,\n}\n\n/**\n * `HyperscriptCreators` are dictionaries of `HyperscriptCreator` functions\n * keyed by tag name.\n */\n\ntype HyperscriptCreators<T = any> = Record<\n  string,\n  (tagName: string, attributes: { [key: string]: any }, children: any[]) => T\n>\n\n/**\n * `HyperscriptShorthands` are dictionaries of properties applied to specific\n * kind of object, keyed by tag name. They allow you to easily define custom\n * hyperscript tags for your domain.\n */\n\ntype HyperscriptShorthands = Record<string, Record<string, any>>\n\n/**\n * Create a Slate hyperscript function with `options`.\n */\n\nconst createHyperscript = (\n  options: {\n    creators?: HyperscriptCreators\n    elements?: HyperscriptShorthands\n  } = {}\n) => {\n  const { elements = {} } = options\n  const elementCreators = normalizeElements(elements)\n  const creators = {\n    ...DEFAULT_CREATORS,\n    ...elementCreators,\n    ...options.creators,\n  }\n\n  const jsx = createFactory(creators)\n  return jsx\n}\n\n/**\n * Create a Slate hyperscript function with `options`.\n */\n\nconst createFactory = <T extends HyperscriptCreators>(creators: T) => {\n  const jsx = <S extends keyof T & string>(\n    tagName: S,\n    attributes?: Object,\n    ...children: any[]\n  ): ReturnType<T[S]> => {\n    const creator = creators[tagName]\n\n    if (!creator) {\n      throw new Error(`No hyperscript creator found for tag: <${tagName}>`)\n    }\n\n    if (attributes == null) {\n      attributes = {}\n    }\n\n    if (!isPlainObject(attributes)) {\n      children = [attributes].concat(children)\n      attributes = {}\n    }\n\n    children = children.filter(child => Boolean(child)).flat()\n    const ret = creator(tagName, attributes, children)\n    return ret\n  }\n\n  return jsx\n}\n\n/**\n * Normalize a dictionary of element shorthands into creator functions.\n */\n\nconst normalizeElements = (elements: HyperscriptShorthands) => {\n  const creators: HyperscriptCreators<Element> = {}\n\n  for (const tagName in elements) {\n    const props = elements[tagName]\n\n    if (typeof props !== 'object') {\n      throw new Error(\n        `Properties specified for a hyperscript shorthand should be an object, but for the custom element <${tagName}>  tag you passed: ${props}`\n      )\n    }\n\n    creators[tagName] = (\n      tagName: string,\n      attributes: { [key: string]: any },\n      children: any[]\n    ) => {\n      return createElement('element', { ...props, ...attributes }, children)\n    }\n  }\n\n  return creators\n}\n\nexport { createHyperscript, HyperscriptCreators, HyperscriptShorthands }\n","import {\n  createHyperscript,\n  HyperscriptCreators,\n  HyperscriptShorthands,\n} from './hyperscript'\n\n/**\n * The default hyperscript factory that ships with Slate, without custom tags.\n */\n\nconst jsx = createHyperscript()\n\nexport { jsx, createHyperscript, HyperscriptCreators, HyperscriptShorthands }\n"],"names":["_typeof","ANCHOR","WeakMap","FOCUS","Token","AnchorToken","props","offset","path","FocusToken","addAnchorToken","text","token","length","set","getAnchorOffset","get","addFocusToken","getFocusOffset","STRINGS","WeakSet","resolveDescendants","children","nodes","addChild","child","prev","add","Text","isText","c","has","equals","loose","push","Element","isElement","n","Error","flat","Infinity","createAnchor","tagName","attributes","createCursor","createElement","createFocus","createFragment","createSelection","anchor","find","focus","createText","node","Object","assign","createEditor","otherChildren","selectionChild","Range","isRange","descendants","selection","editor","makeEditor","Node","texts","DEFAULT_CREATORS","cursor","element","fragment","createHyperscript","options","elements","elementCreators","normalizeElements","creators","jsx","createFactory","creator","isPlainObject","concat","filter","Boolean","ret"],"mappings":"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"}